{% extends "base.html" %}
{% load static %}

{% block title %}Time Off — Bookora{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/provider.css' %}">
<link rel="stylesheet" href="{% static 'css/provider-timeoff.css' %}">
{% endblock %}

{% block content %}
<section class="provider-page">

  <header class="provider-hero">
    <div>
      <h1 class="provider-title">Manage Time Off</h1>
      <p class="provider-subtitle">
        Block days or hours when you are unavailable.
      </p>
    </div>
  </header>

  <div class="card">

    <h2 class="card-title">Block Time</h2>

    <form method="post" class="timeoff-form">
      {% csrf_token %}

      <div class="form-grid">

        <div class="form-group">
          <label for="start_at">Start</label>
          <input type="datetime-local" id="start_at" name="start_at" required>
        </div>

        <div class="form-group">
          <label for="end_at">End</label>
          <input type="datetime-local" id="end_at" name="end_at" required>
        </div>

        <div class="form-group full">
          <label for="reason">Reason (optional)</label>
          <input type="text" id="reason" name="reason" placeholder="Vacation, medical leave, etc.">
        </div>

      </div>

      <div class="actions">
        <button type="submit" class="btn btn-primary">Block Time</button>
        <a href="{% url 'booking:provider_home' %}" class="btn btn-ghost">Back</a>
      </div>

    </form>

  </div>

  <div class="card">

    <h2 class="card-title">Blocked Periods</h2>

    {% if timeoffs %}
      <div class="timeoff-list">
        {% for t in timeoffs %}
          <div class="timeoff-item">
            <div class="timeoff-main">
              <div class="timeoff-date">
                {{ t.start_at|date:"d M Y H:i" }} →
                {{ t.end_at|date:"d M Y H:i" }}
              </div>
              {% if t.reason %}
                <div class="timeoff-reason">{{ t.reason }}</div>
              {% endif %}
            </div>

            <div class="timeoff-actions">
              <a class="btn btn-danger btn-small"
                 href="{% url 'booking:delete_timeoff' t.id %}">
                 Delete
              </a>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="muted">No blocked periods yet.</p>
    {% endif %}

  </div>

</section>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/provider-timeoff.js' %}"></script>
{% endblock %}